# vim:set ft=dockerfile:

FROM ruby:2.7 as builder

COPY Gemfile Gemfile.lock ./
RUN bundle install

FROM ruby:2.7-slim as rails-dev

RUN apt-get update \
	&& apt-get install -y locales libpq5 \
	&& echo 'ja_JP.UTF-8 UTF-8' >> /etc/locale.gen \
	&& locale-gen \
	&& update-locale LANG=ja_JP.UTF-8
ENV LANG=ja_JP.UTF-8

WORKDIR /app
COPY --from=builder /usr/local/bundle /usr/local/bundle
